!function(t){function e(a){if(i[a])return i[a].exports;var n=i[a]={exports:{},id:a,loaded:!1};return t[a].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){i(2),i(3),i(4),i(5);var a=i(1);if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");AFRAME.registerComponent("barchart3d",{schema:{gridson:{default:!0},xsteps:{default:5},ysteps:{default:5},zsteps:{default:5},width:{default:10},height:{default:10},depth:{default:.5},color:{default:"#00FF00"},title:{default:""}},onDataLoaded:a.onDataLoaded,update:a.default_update,multiple:!1,init:a.default_init,update:a.default_update,initChart:function(){var t=this.el,e=this.data;if((t._data&&0!==t._data.length||t._group)&&t._zAxis){var i,a=function(t,e){var i=e/2+t;return i};t._data&&t._data.length>0?i=t._data:t._group&&(i=t._group.all()),BAR_WIDTH=e.width/i.length,BAR_DEPTH=e.depth/t._zAxis.length,MAX_HEIGHT=e.height;var n,r,o=i.map(function(e){var i=e;return t._arrAccesor(e).map(function(e){return t._heightAccesor(e,i)})}),d=Math.max.apply(null,[].concat.apply([],o));document.createElement("a-entity");n=BAR_WIDTH/2,r=0;for(var s=0;s<i.length;s++){for(var l=i[s].value,h=0;h<l.length;h++){var u=t._heightAccesor(l[h],l)/d*MAX_HEIGHT,p=a(r,u),c=document.createElement("a-box"),f=t._colors.find(function(t){return t.key===l[h].key}).value,v=t._zAxis.findIndex(function(t){return t.key===l[h].key}),m=-BAR_DEPTH*(v+.5),A={x:n,y:p,z:m};c.setAttribute("width",BAR_WIDTH),c.setAttribute("height",u),c.setAttribute("depth",BAR_DEPTH),c.setAttribute("color",f),c.setAttribute("position",A);var _=i[s].value;t._valueHandler&&(_=t._valueHandler(l[h],l));var g=i[s].key;t._keyHandler&&(g=t._keyHandler(i[s]));var E={name:"key:"+g+" value:"+_,data:{key:i[s].key,value:i[s].value},position:{x:A.x,y:MAX_HEIGHT+.25,z:A.z},origin_color:f};c._partData=E,t.appendChild(c);var y=function(t,e){if(t.el._dimension){var i=t.el._dimension;i.filterAll(null),i=i.filter(e.data.key);var a;if(t.el._dashboard?a=t.el._dashboard:t.el._panel&&(a=t.el._panel._dashboard),a)for(var n=a.allCharts(),r=0;r<n.length;r++)n[r]!==t.el&&n[r]._group&&n[r].emit("data-loaded");else for(var o=t.el.parentElement.children,r=0;r<o.length;r++)o[r]!==t.el&&o[r]._group&&o[r].emit("data-loaded");t.el.emit("filtered",{element:e})}},b=y.bind(null,this,c._partData);c.addEventListener("click",b)}n+=BAR_WIDTH}this.addEvents();for(var w=this.addYLabels(),x=0;x<w.length;x++)t.appendChild(w[x]);for(var T=this.addZLabels(),x=0;x<T.length;x++)t.appendChild(T[x]);e.gridson&&this.addGrid(),""!==e.title&&this.addTitle()}},addGrid:function(){var t=document.createElement("a-entity");t.setAttribute("aframe-grid",{height:this.data.height,width:this.data.width,ysteps:this.data.ysteps,xsteps:this.data.xsteps}),t.setAttribute("position",{x:0,y:0,z:-this.data.depth}),this.el.appendChild(t);var e=document.createElement("a-entity");e.setAttribute("aframe-gridyz",{height:this.data.height,depth:this.data.depth,ysteps:this.data.ysteps,zsteps:this.el._zAxis.length});var i=document.createElement("a-entity");i.setAttribute("aframe-gridxz",{width:this.data.width,depth:this.data.depth,xsteps:this.data.xsteps,zsteps:this.el._zAxis.length}),this.el.appendChild(e),this.el.appendChild(i)},addTitle:a.addTitle,addEvents:a.addEvents,addYLabels:function(){var t,e,i,a=function(t,e,i){var a=document.createElement("a-entity");TEXT_WIDTH=6;var n=-.7,r=e;a.setAttribute("text",{color:"#000000",side:"double",value:i.toFixed(2),width:TEXT_WIDTH,wrapCount:30,align:"center"});var o={x:n,y:r,z:-t.data.depth};return a.setAttribute("position",o),a},n=this.el;i=this.el._data?this.el._data:this.el._group.top(1/0);var r=i.map(function(t){var e=t;return n._arrAccesor(t).map(function(t){return n._heightAccesor(t,e)})});e=Math.max.apply(null,[].concat.apply([],r)),t=i.length;for(var o=e/this.data.ysteps,d=this.data.height/this.data.ysteps,s=[],l=0;l<this.data.ysteps+1;l++)s.push(a(this,l*d,l*o));return s},addZLabels:function(){if(this.el._zAxis){for(var t=function(t,e,i){var a=document.createElement("a-entity");TEXT_WIDTH=6;var n=-1*(TEXT_WIDTH/2+.7),r=-e,o=t.el._colors.find(function(t){return t.key===i.key}).value;a.setAttribute("text",{color:o,side:"double",value:i.key,width:TEXT_WIDTH,wrapCount:30,align:"right"});var d={x:n,y:0,z:r};return a.setAttribute("position",d),a},e=this.data.depth/this.el._zAxis.length,i=[],a=0;a<this.el._zAxis.length;a++)i.push(t(this,a*e+e/2,this.el._zAxis[a]));return i}},remove:function(){for(;this.el.firstChild;)this.el.removeChild(this.el.firstChild);this.el.innerHTML="",this.el.removeEventListener("data-loaded",this.onDataLoaded.bind(this))},pause:function(){},play:function(){}})},function(t,e){function i(){var t=function(t){console.log(this.name+": Data Loaded!"),this.reload=!0,t.target.components[this.name].update(this.data)},e=function(t){this.name;this.loaded=!1,this.el.addEventListener("data-loaded",this.onDataLoaded.bind(this))},i=function(t){if(this.el._data&&this.el._data.length>0||this.el._group)if(this.reload){for(;this.el.firstChild;)this.el.firstChild.parentNode.removeChild(this.el.firstChild);this.initChart(),this.reload=!1,this.el.setAttribute("visible",!0)}else{var e=AFRAME.utils.diff(t,this.data);if(""!==e.title){var i=this.el.querySelector("[title]");i&&i.setAttribute("title","caption",e.title)}}},a=function(){for(var t=function(t,a){a.addEventListener("mouseenter",e.bind(t,a)),a.addEventListener("mouseleave",i.bind(t,a))},e=function(t){r(this,t),o(t)},i=function(t){a(t),n(t)},a=function(t){var e=t;e.setAttribute("color",t._partData.origin_color)},n=function(t){var e=t.parentElement,i=e.querySelector("#tooltip");i&&e.removeChild(i)},r=function(t,e){var i;i=document.createElement("a-entity");var a=Number.parseInt(e._partData.origin_color.replace("#","0x"))-1315860;a="#"+("000000"+a.toString(16)).slice(-6);var n=6;i.setAttribute("text",{color:"#000000",side:"double",value:t._tooltip?t._tooltip(e.data):e._partData.name,width:n,wrapCount:30});var r={x:e._partData.position.x+n/2,y:e._partData.position.y,z:e._partData.position.z};i.id="tooltip",i.setAttribute("position",r),e.parentElement.appendChild(i)},o=function(t){var e=t,i=e.getObject3D("mesh").material.color.getHex(),a=16777215^i;e.setAttribute("color","#"+("000000"+a.toString(16)).slice(-6))},d=0;d<this.el.children.length;d++)t(this.el,this.el.children[d])},n=function(){var t=document.createElement("a-entity");t.setAttribute("title",{caption:this.data.title,width:Math.max(this.data.width/2,6)}),t.setAttribute("position",{x:this.data.width/2,y:this.data.height+1,z:0}),this.el.appendChild(t)};return{onDataLoaded:t,default_init:e,default_update:i,addEvents:a,addTitle:n}}t.exports=i()},function(t,e){if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");AFRAME.registerComponent("aframe-grid",{schema:{height:{default:1},width:{default:1},ysteps:{default:4},xsteps:{default:4}},multiple:!1,init:function(){},update:function(t){function e(t){var e=new THREE.Geometry;e.vertices.push(new THREE.Vector3(0,-.2,0),new THREE.Vector3(0,a.height,0));var i=new THREE.Line(e,n);return i.position.set(t,0,0),i}function i(t){var e=new THREE.Geometry;e.vertices.push(new THREE.Vector3(-.2,0,0),new THREE.Vector3(a.width,0,0));var i=new THREE.Line(e,n);return i.position.set(0,t,0),i}for(var a=this.data,n=new THREE.LineBasicMaterial({color:0,linewidth:1}),r=a.height/a.ysteps,o=new THREE.Object3D,d=0;d<a.ysteps+1;d++)o.add(i(d*r));for(var s=a.width/a.xsteps,d=0;d<a.xsteps+1;d++)o.add(e(d*s));this.el.setObject3D("group",o)},remove:function(){this.el.removeObject3D("group")},pause:function(){},play:function(){}})},function(t,e){if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");AFRAME.registerComponent("aframe-gridxz",{schema:{},multiple:!1,init:function(){},update:function(t){},remove:function(){},pause:function(){},play:function(){}})},function(t,e){if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");AFRAME.registerComponent("aframe-gridyz",{schema:{},multiple:!1,init:function(){},update:function(t){},remove:function(){},pause:function(){},play:function(){}})},function(t,e){if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");AFRAME.registerComponent("title",{schema:{caption:{default:"",type:"string"},width:{default:7,type:"number"}},multiple:!1,update:function(t){var e,i=this.data;e=this.el;var a=i.width;e.setAttribute("text",{color:"#000000",side:"double",value:i.caption,align:"center",width:a,wrapCount:30})},remove:function(){},pause:function(){},play:function(){}})}]);