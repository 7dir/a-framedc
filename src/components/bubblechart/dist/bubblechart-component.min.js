!function(t){function e(i){if(a[i])return a[i].exports;var n=a[i]={exports:{},id:i,loaded:!1};return t[i].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var a={};return e.m=t,e.c=a,e.p="",e(0)}([function(t,e,a){a(2),a(3),a(4),a(5);var i=a(1);if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");AFRAME.registerComponent("bubblechart",{schema:{gridson:{default:!0},xsteps:{default:5},ysteps:{default:5},zsteps:{default:10},width:{default:10},height:{default:10},depth:{default:20},color:{default:"#00FF00"},title:{default:""}},multiple:!1,onDataLoaded:i.onDataLoaded,init:i.default_init,update:i.default_update,update:i.default_update,initChart:function(){var t=this.el,e=this.data;if(t._data&&0!==t._data.length||t._group){var a;t._data&&t._data.length>0?a=t._data:t._group&&(a=t._group.all());var i,n,r,o=(e.depth,e.height),s=a.map(function(e){var a=e;return t._arrAccesor(e).map(function(e){return t._heightAccesor(e,a)})}),d=Math.max.apply(null,[].concat.apply([],s));s=a.map(function(e){var a=e;return t._arrAccesor(e).map(function(e){return t._radiusAccesor(e,a)})});var l=Math.max.apply(null,[].concat.apply([],s)),h=t._zAxis,u=Math.min(e.width,e.height,e.depth)/Math.min(a.length,h.length),p=e.depth/h.length,c=e.width/a.length;i=0,n=u,r=-u/2;for(var f=0;f<a.length;f++){for(var m=0;m<h.length;m++){var v=h[m],g=a[f],A=function(t){if(t.key)return t.key===v.key},_=t._arrAccesor(g).find(A);if(_){var y=t._heightAccesor(_,g)/d*o,E=v.value,b=t._radiusAccesor(_,g)/l*u,w={x:i,y:y,z:r},x=document.createElement("a-entity");x.setAttribute("mixin","sph transparente"),x.setAttribute("geometry","radius",b),x.setAttribute("material","color",E),x.setAttribute("position",w),t.appendChild(x);var C=a[f].value;t._valueHandler&&(C=t._valueHandler(_,g));var T=a[f].key;t._keyHandler&&(T=t._keyHandler(g));var R={name:"key:"+T+" value:"+C,data:{key:a[f].key,value:C},position:{x:w.x,y:n+o+.25,z:w.z},origin_color:E};x._partData=R;var z=function(t,e){if(t.el._dimension){var a=t.el._dimension;a.filterAll(null),a=a.filter(e.data.key);var i;if(t.el._dashboard?i=t.el._dashboard:t.el._panel&&(i=t.el._panel._dashboard),i)for(var n=i.allCharts(),r=0;r<n.length;r++)n[r]!==t.el&&n[r]._group&&n[r].emit("data-loaded");else for(var o=t.el.parentElement.children,r=0;r<o.length;r++)o[r]!==t.el&&o[r]._group&&o[r].emit("data-loaded")}t.el.emit("filtered",{element:e})},M=z.bind(null,this,x._partData);x.addEventListener("click",M)}r-=p}r=-u/2,i+=c}this.addEvents();for(var D=this.addYLabels(),H=0;H<D.length;H++)t.appendChild(D[H]);for(var F=this.addZLabels(),H=0;H<F.length;H++)t.appendChild(F[H]);e.gridson&&this.addGrid(),""!==e.title&&this.addTitle()}},addGrid:function(){var t=document.createElement("a-entity");t.setAttribute("aframe-grid",{height:this.data.height,width:this.data.width,ysteps:this.data.ysteps,xsteps:this.data.xsteps}),t.setAttribute("position",{x:0,y:0,z:-this.data.depth}),this.el.appendChild(t);var e=document.createElement("a-entity");e.setAttribute("aframe-gridyz",{height:this.data.height,depth:this.data.depth,ysteps:this.data.ysteps,zsteps:this.el._zAxis.length});var a=document.createElement("a-entity");a.setAttribute("aframe-gridxz",{width:this.data.width,depth:this.data.depth,xsteps:this.data.xsteps,zsteps:this.el._zAxis.length}),this.el.appendChild(e),this.el.appendChild(a)},addYLabels:function(){var t,e,a=function(t,e,a){var i=document.createElement("a-entity");TEXT_WIDTH=6;var n=-.7,r=e;i.setAttribute("text",{color:"#000000",side:"double",value:a.toFixed(2),width:TEXT_WIDTH,wrapCount:30,align:"center"});var o={x:n,y:r,z:-t.data.depth};return i.setAttribute("position",o),i},i=this.el;e=this.el._data?this.el._data:this.el._group.top(1/0);var n=e.map(function(t){var e=t;return i._arrAccesor(t).map(function(t){return i._heightAccesor(t,e)})});t=Math.max.apply(null,[].concat.apply([],n));for(var r=t/this.data.ysteps,o=this.data.height/this.data.ysteps,s=[],d=0;d<this.data.ysteps+1;d++)s.push(a(this,d*o,d*r));return s},addZLabels:function(){if(this.el._zAxis){for(var t=function(t,e,a){var i=document.createElement("a-entity");TEXT_WIDTH=6;var n=-1*(TEXT_WIDTH/2+.7),r=-e;i.setAttribute("text",{color:a.value,side:"double",value:a.key,width:TEXT_WIDTH,wrapCount:30,align:"right"});var o={x:n,y:0,z:r};return i.setAttribute("position",o),i},e=this.data.depth/this.el._zAxis.length,a=[],i=0;i<this.el._zAxis.length;i++)a.push(t(this,i*e+e/2,this.el._zAxis[i]));return a}},remove:function(){},pause:function(){},play:function(){}})},function(t,e){function a(){var t=function(t){console.log(this.name+": Data Loaded!"),this.reload=!0,t.target.components[this.name].update(this.data)},e=function(t){this.name;this.loaded=!1,this.el.addEventListener("data-loaded",this.onDataLoaded.bind(this))},a=function(t){if(this.el._data&&this.el._data.length>0||this.el._group)if(this.reload){for(;this.el.firstChild;)this.el.firstChild.parentNode.removeChild(this.el.firstChild);this.initChart(),this.reload=!1,this.el.setAttribute("visible",!0)}else{var e=AFRAME.utils.diff(t,this.data);if(""!==e.title){var a=this.el.querySelector("[title]");a&&a.setAttribute("title","caption",e.title)}}},i=function(){for(var t=function(t,i){i.addEventListener("mouseenter",e.bind(t,i)),i.addEventListener("mouseleave",a.bind(t,i))},e=function(t){r(this,t),o(t)},a=function(t){i(t),n(t)},i=function(t){var e=t;e.setAttribute("color",t._partData.origin_color)},n=function(t){var e=t.parentElement,a=e.querySelector("#tooltip");a&&e.removeChild(a)},r=function(t,e){var a;a=document.createElement("a-entity");var i=Number.parseInt(e._partData.origin_color.replace("#","0x"))-1315860;i="#"+("000000"+i.toString(16)).slice(-6);var n=6;a.setAttribute("text",{color:"#000000",side:"double",value:t._tooltip?t._tooltip(e.data):e._partData.name,width:n,wrapCount:30});var r={x:e._partData.position.x+n/2,y:e._partData.position.y,z:e._partData.position.z};a.id="tooltip",a.setAttribute("position",r),e.parentElement.appendChild(a)},o=function(t){var e=t,a=e.getObject3D("mesh").material.color.getHex(),i=16777215^a;e.setAttribute("color","#"+("000000"+i.toString(16)).slice(-6))},s=0;s<this.el.children.length;s++)t(this.el,this.el.children[s])},n=function(){var t=document.createElement("a-entity");t.setAttribute("title",{caption:this.data.title,width:Math.max(this.data.width/2,6)}),t.setAttribute("position",{x:this.data.width/2,y:this.data.height+1,z:0}),this.el.appendChild(t)};return{onDataLoaded:t,default_init:e,default_update:a,addEvents:i,addTitle:n}}t.exports=a()},function(t,e){if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");AFRAME.registerComponent("aframe-grid",{schema:{height:{default:1},width:{default:1},ysteps:{default:4},xsteps:{default:4}},multiple:!1,init:function(){},update:function(t){function e(t){var e=new THREE.Geometry;e.vertices.push(new THREE.Vector3(0,-.2,0),new THREE.Vector3(0,i.height,0));var a=new THREE.Line(e,n);return a.position.set(t,0,0),a}function a(t){var e=new THREE.Geometry;e.vertices.push(new THREE.Vector3(-.2,0,0),new THREE.Vector3(i.width,0,0));var a=new THREE.Line(e,n);return a.position.set(0,t,0),a}for(var i=this.data,n=new THREE.LineBasicMaterial({color:0,linewidth:1}),r=i.height/i.ysteps,o=new THREE.Object3D,s=0;s<i.ysteps+1;s++)o.add(a(s*r));for(var d=i.width/i.xsteps,s=0;s<i.xsteps+1;s++)o.add(e(s*d));this.el.setObject3D("group",o)},remove:function(){this.el.removeObject3D("group")},pause:function(){},play:function(){}})},function(t,e){if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");AFRAME.registerComponent("aframe-gridxz",{schema:{},multiple:!1,init:function(){},update:function(t){},remove:function(){},pause:function(){},play:function(){}})},function(t,e){if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");AFRAME.registerComponent("aframe-gridyz",{schema:{},multiple:!1,init:function(){},update:function(t){},remove:function(){},pause:function(){},play:function(){}})},function(t,e){if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");AFRAME.registerComponent("title",{schema:{caption:{default:"",type:"string"},width:{default:7,type:"number"}},multiple:!1,update:function(t){var e,a=this.data;e=this.el;var i=a.width;e.setAttribute("text",{color:"#000000",side:"double",value:a.caption,align:"center",width:i,wrapCount:30})},remove:function(){},pause:function(){},play:function(){}})}]);